# Compiler and flags
CC := gcc
CFLAGS := -Wall -Werror -Wextra -pedantic

# Files
SRC := $(shell ls *.c)
OBJ := $(SRC:.c=.o)
NAME := school

# Default rule
all: $(NAME)

# Rule to build the executable
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

# Clean up Emacs and Vim temporary files along with the executable
clean:
	@if [ -f $(NAME) ]; then $(RM) -f $(NAME); fi
	@if [ -f *.tmp ] || [ -f *.swp ] || [ -f *.swo ]; then $(RM) -f *.tmp *.swp *.swo; fi

# Clean up object files
oclean:
	@if [ -f *.o ]; then $(RM) -f *.o; fi

# Full clean: executable, object files, and temporary files
fclean: clean oclean

# Rebuild everything
re: fclean all

# Prevent the Makefile from running if m.h is missing
-include m.h
