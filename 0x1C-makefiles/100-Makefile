# Compiler and flags
CC := gcc
CFLAGS := -Wall -Werror -Wextra -pedantic

# Files
SRC := $(shell ls *.c)
OBJ := $(patsubst %.c, %.o, $(SRC))
NAME := school

# Default rule
all: $(NAME)

# Rule to build the executable
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

# Clean up Emacs and Vim temporary files along with the executable
clean:
	@echo "Cleaning up..."
	@rm -f $(NAME)
	@rm -f *.tmp *.swp *.swo

# Clean up object files
oclean:
	@echo "Cleaning object files..."
	@rm -f $(OBJ)

# Full clean: executable, object files, and temporary files
fclean: clean oclean

# Rebuild everything
re: fclean all

# Prevent the Makefile from running if m.h is missing
-include m.h
