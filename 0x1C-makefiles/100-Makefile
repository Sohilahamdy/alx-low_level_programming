# Compiler and flags
CC := gcc
CFLAGS := -Wall -Werror -Wextra -pedantic

# Files and directories
SRC := $(wildcard *.c)
OBJ := $(SRC:.c=.o)
NAME := school

# Default rule
all: $(NAME)

# Rule to build the executable
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

# Clean up Emacs and Vim temporary files along with the executable
clean:
	$(RM) -f $(NAME) *.tmp *.swp *.swo

# Clean up object files
oclean:
	$(RM) -f $(OBJ)

# Full clean: executable, object files, and temporary files
fclean: clean oclean

# Rebuild everything
re: fclean all

# Prevent the Makefile from running if m.h is missing
-include m.h
