#!/usr/bin/make -f

# Variables
CC = gcc
SRC = main.c school.c
OBJ = main.o school.o
NAME = school
CFLAGS = -Wall -Werror -Wextra -pedantic

# All rule
all: $(NAME)

# Create executable
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

# Clean up
clean:
	rm -f *.o

# Remove object files
oclean:
	rm -f *.o

# Remove executable and object files
fclean: clean
	rm -f $(NAME)

# Force recompilation
re: fclean all

# Ensure missing header file causes failure
ifeq ($(shell test -e m.h; echo $$?),1)
$(error Header file m.h is missing)
endif
