#!/usr/bin/make -f

# Variables
CC = gcc
SRC = main.c school.c
OBJ = $(SRC:.c=.o)
NAME = school
CFLAGS = -Wall -Werror -Wextra -pedantic

# All rule
all: $(NAME)

# Create executable
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

# Clean up
clean:
	$(RM) *.o

# Remove object files
oclean:
	$(RM) *.o

# Remove executable and object files
fclean: clean
	$(RM) $(NAME)

# Force recompilation
re: fclean all

# Ensure missing header file causes failure
ifeq ($(shell test -e m.h; echo $$?),0)
else
$(error Header file m.h is missing)
endif
