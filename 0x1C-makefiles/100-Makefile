#!/usr/bin/make -f

# Variables
CC = gcc
SRC = main.c school.c
OBJ = main.o school.o
NAME = school
CFLAGS = -Wall -Werror -Wextra -pedantic

# Default rule: build executable
all: $(NAME)

# Build the executable
$(NAME): $(OBJ)
	$(CC) $(CFLAGS) $(OBJ) -o $(NAME)

# Remove object files
oclean:
	$(RM) $(OBJ)

# Remove executable and object files
fclean: oclean
	$(RM) $(NAME)

# Clean up Emacs and Vim temporary files and the executable
clean: fclean
	$(RM) *~ \#*\# .*.swp

# Force recompilation
re: fclean all

# Ensure that the header file m.h exists
ifeq ($(shell test -e m.h; echo $$?),1)
$(error Header file m.h is missing)
endif
